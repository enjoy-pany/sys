{"version":3,"sources":["webpack:///src/page/canvasDemo/scale.vue","webpack:///./src/page/canvasDemo/scale.vue?52a5","webpack:///./src/page/canvasDemo/scale.vue"],"names":["scale","data","canvas","nowImg","imgX","imgY","zoom","methods","handleMouseWheel","event","pos","this","windowToCanvas","clientX","clientY","wheelDelta","x","y","console","log","drawImage","$message","success","toFixed","handleMouseDown","_this","loc","preventDefault","buttons","onmousemove","evt","style","cursor","posl","handleMouseUp","onmouseup","loadImg","imgUrl","_this2","img","Image","onload","imgWidth","width","imgHeight","height","canvasWidth","canvasHeight","src","components","mounted","document","getElementById","canvasTool","canvasDemo_scale","render","_h","$createElement","_c","_self","attrs","id","on","mousedown","mouseup","mousewheel","_v","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/11.a0fbd40d6267c38ca592.js","sourcesContent":["<template>\n<div>\n    <canvas width=\"1000\" height=\"500\" id=\"canvas\" \n    \t@mousedown=\"handleMouseDown\" \n    \t@mouseup=\"handleMouseUp\"\n    \t@mousewheel=\"handleMouseWheel\">\n        canvas not supported\n    </canvas>\n</div>\n</template>\n<script>\nimport { Canvas } from './tool/canvasTool.js';\nexport default {\n    data() {\n        return {\n        \tcanvas: null, //自定义canvas类\n        \tnowImg: null, //当前图片\n        \timgX: 0, //图片位置x\n        \timgY: 0, //图片位置y\n        \tzoom: 1, //放大倍数\n        }\n    },\n    methods: {\n    \thandleMouseWheel(event) {\n    \t\tvar scaleNum = 1.8\n    \t\t// event.wheelDelta = event.wheelDelta ? event.wheelDelta : (event.deltalY * (-40));  //获取当前鼠标的滚动情况\n    \t\tvar pos = this.canvas.windowToCanvas(event.clientX, event.clientY);\n            if (event.wheelDelta < 0) {\n                this.zoom *= scaleNum;\n                this.imgX = pos.x - scaleNum * (pos.x - this.imgX)\n                this.imgY = pos.y - scaleNum * (pos.y - this.imgY)\n            } else {\n                this.zoom /= scaleNum;\n                this.imgX = this.imgX + (pos.x - this.imgX) * ((scaleNum-1)/scaleNum)\n                this.imgY = this.imgY + (pos.y - this.imgY) * ((scaleNum-1)/scaleNum)\n            }\n            console.log('scale =========>',this.zoom);\n            this.canvas.drawImage(this.nowImg, this.imgX, this.imgY, this.zoom);   //重新绘制图片\n            this.$message.success(`缩放至${(this.zoom*100).toFixed(0)}%`)\n    \t},\n    \thandleMouseDown(event) {\n    \t\tvar loc = this.canvas.windowToCanvas(event.x, event.y);\n            event.preventDefault();\n            if (event.buttons == 1) { //左键判定\n                this.canvas.canvas.onmousemove = (evt) => {\n                    this.canvas.canvas.style.cursor = 'move';\n                    var posl = this.canvas.windowToCanvas(evt.clientX, evt.clientY);\n                    var x = posl.x - loc.x;\n                    var y = posl.y - loc.y;\n                    loc = posl;\n                    this.imgX += x;\n                    this.imgY += y;\n                    this.canvas.drawImage(this.nowImg, this.imgX, this.imgY, this.zoom)\n                }\n            }\n    \t},\n    \thandleMouseUp(event) {\n    \t\tthis.canvas.canvas.onmousemove = null;\n            this.canvas.canvas.onmouseup = null;\n            this.canvas.canvas.style.cursor = 'default';\n    \t},\n    \tloadImg (imgUrl) {\n            //重新加载图片重置放大倍数\n            this.zoom = 1;\n            const img = new Image();\n            img.onload = ()=> {\n                let imgWidth = img.width, imgHeight=img.height;\n                let canvasWidth = this.canvas.canvas.width, canvasHeight = this.canvas.canvas.height;\n\n                if(imgWidth>canvasWidth) {\n                    this.zoom = canvasWidth/imgWidth\n                    imgWidth = canvasWidth\n                    imgHeight *=this.zoom\n                }\n                if(imgHeight>canvasHeight) {\n                    this.zoom = canvasHeight/imgHeight\n                    imgHeight = canvasHeight\n                    imgWidth *=this.zoom\n                }\n                this.imgX = (canvasWidth - imgWidth)/2\n                this.imgY = (canvasHeight - imgHeight)/2\n                this.canvas.drawImage(img,this.imgX,this.imgY,this.zoom)\n            }\n            img.src = imgUrl\n            this.nowImg = img\n        }\n    },\n    components: {\n    },\n    mounted() {\n    \tconst canvas = document.getElementById('canvas');\n        const that = this;\n        this.canvas = new Canvas(canvas);\n\n        this.loadImg('./static/images/timg.jpeg')\n    }\n}\n</script>\n<style lang=\"less\" scoped>\n\t#canvas{\n        background: #fff;\n        cursor: pointer;\n        margin-left: 10px;\n        margin-top: 10px;\n        box-shadow: 4px 4px 8px rgba(0,0,0,0.5);\n    }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/page/canvasDemo/scale.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('canvas',{attrs:{\"width\":\"1000\",\"height\":\"500\",\"id\":\"canvas\"},on:{\"mousedown\":_vm.handleMouseDown,\"mouseup\":_vm.handleMouseUp,\"mousewheel\":_vm.handleMouseWheel}},[_vm._v(\"\\n        canvas not supported\\n    \")])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-4ffb18fa\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/page/canvasDemo/scale.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-4ffb18fa\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./scale.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./scale.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./scale.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4ffb18fa\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./scale.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-4ffb18fa\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/page/canvasDemo/scale.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}